{
  "name": "å¤šè½®å¯¹è¯",
  "nodes": [
    {
      "parameters": {
        "promptType": "define",
        "text": "=äº§å“: {{$json[\"productDescription\"]}}",
        "options": {
          "systemMessage": "ä½ æ˜¯ä¸€ä¸ªåˆ›æ„å“ç‰Œä»£ç†ã€‚æ ¹æ®è¿™ä¸ªäº§å“æè¿°ï¼Œç”Ÿæˆ3ä¸ªä¸åŒçš„åç§°+æ ‡è¯­ç»„åˆã€‚\n\nè¿”å›æ ¼å¼å¦‚ä¸‹ï¼š\n[\n  { \"name\": \"åç§°1\", \"tagline\": \"æ ‡è¯­1\" },\n  { \"name\": \"åç§°2\", \"tagline\": \"æ ‡è¯­2\" },\n  { \"name\": \"åç§°3\", \"tagline\": \"æ ‡è¯­3\" }\n]\n"
        }
      },
      "id": "a00de47b-6912-4890-bc08-58c809b790af",
      "name": "AIä»£ç†",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        1168,
        128
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "options": {
          "reset": true
        }
      },
      "id": "166f8d78-8284-417f-b28f-bf81b0ce4e6e",
      "name": "å¾ªç¯å¤„ç†é¡¹",
      "type": "n8n-nodes-base.splitInBatches",
      "position": [
        1568,
        128
      ],
      "typeVersion": 3
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "or",
          "conditions": [
            {
              "id": "595ebd64-59de-470c-9827-24d204db58f9",
              "operator": {
                "type": "number",
                "operation": "equals"
              },
              "leftValue": "={{ $json.turn }}",
              "rightValue": 5
            },
            {
              "id": "fb2ec186-4676-4e91-85b1-af7ce745b203",
              "operator": {
                "name": "filter.operator.equals",
                "type": "string",
                "operation": "equals"
              },
              "leftValue": "={{ $json.done }}",
              "rightValue": "æ˜¯"
            }
          ]
        },
        "options": {}
      },
      "id": "f283d1e2-5f6d-4b6c-849e-53e934884d87",
      "name": "æ¡ä»¶åˆ¤æ–­",
      "type": "n8n-nodes-base.if",
      "position": [
        1984,
        240
      ],
      "typeVersion": 2.2
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=åˆ›æ„æ–¹æ¡ˆ:\n{{JSON.stringify($('ç¼–è¾‘å­—æ®µ').item.json.ideas)}}",
        "options": {
          "systemMessage": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å“ç‰Œåˆ†æå¸ˆã€‚è¯·ä¸ºä»¥ä¸‹æ¯ä¸ªåç§°+æ ‡è¯­ç»„åˆæä¾›ç®€çŸ­çš„ç¼ºé™·åˆ†æå’Œæ”¹è¿›å»ºè®®ã€‚"
        }
      },
      "id": "0ac9e3a7-8a8d-433e-84f1-b45fec9dc5e6",
      "name": "æ‰¹è¯„ä»£ç†",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        2224,
        304
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=**åŸå§‹åˆ›æ„:** {{ JSON.stringify($('ç¼–è¾‘å­—æ®µ').item.json.ideas) }}\n\n**æ‰¹è¯„åé¦ˆ:** {{ $json.output }}",
        "options": {
          "systemMessage": "ä½ æ˜¯ä¸€ä¸ªä¼˜åŒ–å¸ˆã€‚æ ¹æ®åŸå§‹åˆ›æ„å’Œæ‰¹è¯„åé¦ˆï¼Œåˆ›å»º3ä¸ªæ”¹è¿›åçš„åç§°+æ ‡è¯­ç»„åˆã€‚\n\nè¦æ±‚ç®€æ´ã€å·§å¦™ä¸”å¯Œæœ‰å†²å‡»åŠ›ã€‚\n\nè¿”å›æ ¼å¼å¦‚ä¸‹ï¼š\n[\n  { \"name\": \"åç§°1\", \"tagline\": \"æ ‡è¯­1\" },\n  { \"name\": \"åç§°2\", \"tagline\": \"æ ‡è¯­2\" },\n  { \"name\": \"åç§°3\", \"tagline\": \"æ ‡è¯­3\" }\n]\n"
        }
      },
      "id": "b165bd09-ed8e-47bc-826d-ab4a4ba63658",
      "name": "ä¼˜åŒ–ä»£ç†",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        2656,
        400
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1c6c6fc2-96de-469a-b30f-7ffae52c9847",
              "name": "ideas",
              "type": "array",
              "value": "={{ $json.output }}"
            },
            {
              "id": "1a857aee-ae3f-4e81-a09c-a9e83edd9b98",
              "name": "turn",
              "type": "number",
              "value": "={{ $json.turn || 1}}"
            },
            {
              "id": "d310985b-59a3-44b8-aa5a-e77f2b352ae4",
              "name": "done",
              "type": "string",
              "value": "={{ $json.done || \"å¦\"}}"
            }
          ]
        },
        "options": {}
      },
      "id": "a95b4f5b-5dcd-4633-a241-05ef505118c6",
      "name": "ç¼–è¾‘å­—æ®µ",
      "type": "n8n-nodes-base.set",
      "position": [
        1776,
        240
      ],
      "typeVersion": 3.4
    },
    {
      "parameters": {
        "jsCode": "const ideas = $json.output.ideas || [];\nconst currentTurn = $json.output.turn ?? 0;\nconst currentDone = $json.output.done || \"å¦\";\n\nconst nextTurn = currentTurn + 1;\n\nreturn [\n  {\n    json: {\n      ideas,\n      turn: nextTurn,\n      done: currentDone\n    }\n  }\n];\n"
      },
      "id": "b89dd4eb-56b6-4c28-86c9-dc1f749c4750",
      "name": "ä»£ç ",
      "type": "n8n-nodes-base.code",
      "position": [
        3520,
        768
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "21a77915-3d73-450d-bc9c-f655471a3b56",
              "name": "output",
              "type": "array",
              "value": "={{ $json.ideas }}"
            },
            {
              "id": "6dee88ae-c3f3-464a-a3cc-179bd28b7c5e",
              "name": "turn",
              "type": "number",
              "value": "={{ $json.turn }}"
            },
            {
              "id": "2f2caa57-797c-4fa3-9126-da46777a2b63",
              "name": "done",
              "type": "string",
              "value": "={{ $json.done }}"
            }
          ]
        },
        "options": {}
      },
      "id": "bfa0c52e-283e-40d5-a7f1-f1cce9ff5128",
      "name": "ç¼–è¾‘å­—æ®µ1",
      "type": "n8n-nodes-base.set",
      "position": [
        3744,
        768
      ],
      "typeVersion": 3.4
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n\t\"ideas\": [\n      { \"name\": \"ä¼ä¸šæ™ºè„‘\", \"tagline\": \"åˆ©ç”¨AIå°†æ‚¨çš„å•†ä¸šåˆ›æ„è½¬åŒ–ä¸ºç°å®ã€‚\" },\n      { \"name\": \"åˆ›æ–°é€»è¾‘\", \"tagline\": \"é€šè¿‡AIé©±åŠ¨çš„æ—¥å¿—è®°å½•æ•æ‰å’Œå‘å±•æ‚¨çš„åˆ›ä¸šæƒ³æ³•ã€‚\" },\n      { \"name\": \"åˆ›ä¸šè„šæœ¬\", \"tagline\": \"é€šè¿‡æ™ºèƒ½AIæ—¥å¿—è®°å½•åŠ é€Ÿæ‚¨çš„åˆ›ä¸šæ—…ç¨‹ã€‚\" }],\n  \"done\": \"æ˜¯\",\n  \"turn\": 2\n}"
      },
      "id": "e87b82c4-4bae-4072-a425-bdf421185e21",
      "name": "ç»“æ„åŒ–è¾“å‡ºè§£æå™¨",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        3216,
        704
      ],
      "typeVersion": 1.2
    },
    {
      "parameters": {},
      "id": "6bbbbfa1-f88b-470f-a53a-9d0ee333e428",
      "name": "å½“ç‚¹å‡»'æ‰§è¡Œå·¥ä½œæµ'æ—¶",
      "type": "n8n-nodes-base.manualTrigger",
      "position": [
        736,
        128
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "# âš™ï¸ è®¾ç½®æŒ‡å—\n## è¿™æ˜¯ä¸€ä¸ªå¯ä¾›ç”¨æˆ·å®šåˆ¶çš„å·¥ä½œæµ\n### ğŸ§‘â€ğŸ’» ä½œè€…: [Sebastian/OptiLever](www.linkedin.com/in/sebastian-9ab9b9242)\n\n### ğŸš€ å‰ææ¡ä»¶:\n\n**1. è¿æ¥åˆ°Openai APIè´¦æˆ·ã€‚**\n\n\n---\n\n### ğŸš€ è¿æ¥æ­¥éª¤:\n\n\n1. **ç¼–è¾‘å­—æ®µèŠ‚ç‚¹è®¾ç½®(åˆå§‹)**\n- å®šä½å·¥ä½œæµå¼€å¤´çš„**\"ç¼–è¾‘å­—æ®µ\"**èŠ‚ç‚¹\n- **ç¼–è¾‘ä»¥ä¸‹å­—æ®µ:**\n- ç¡®ä¿è¾“å…¥å­—æ®µ**\"ideas\"**è®¾ç½®ä¸ºæ•°ç»„\n- æ·»åŠ å­—æ®µ**\"turn\"**ç”¨äºè·Ÿè¸ªå¾ªç¯è¿­ä»£æ¬¡æ•°(é»˜è®¤å€¼:1)\n- æ·»åŠ å­—æ®µ**\"done\"**ç”¨äºè·Ÿè¸ªè¯„ä¼°æ˜¯å¦å®Œæˆ(é»˜è®¤å€¼:å¦)\n\n\n\n2. **æ‰¹è¯„ä»£ç†è®¾ç½®**\n- é…ç½®**\"æ‰¹è¯„ä»£ç†\"**èŠ‚ç‚¹åˆ†æè¾“å…¥å¹¶æä¾›åé¦ˆ\n- ç¡®ä¿è¾“å‡ºç»“æ„åŒ…å«æ”¹è¿›å»ºè®®\n\n\n\n3. **ä¼˜åŒ–ä»£ç†è®¾ç½®**\n- é…ç½®**\"ä¼˜åŒ–ä»£ç†\"**èŠ‚ç‚¹ä½¿ç”¨åŸå§‹è¾“å…¥å’Œæ‰¹è¯„åé¦ˆ\n- ç¡®ä¿è¾“å‡ºæ˜¯è¾“å…¥çš„æ”¹è¿›ç‰ˆæœ¬(ä¾‹å¦‚ä¸‰ä¸ªæ”¹è¿›åçš„åç§°å’Œæ ‡è¯­)\n\n\n\n4. **è¯„ä¼°ä»£ç†è®¾ç½®**\n- é…ç½®**\"è¯„ä¼°ä»£ç†\"**èŠ‚ç‚¹å¯¹ä¼˜åŒ–åçš„è¾“å‡ºè¿›è¡Œæ’å\n- ç¡®ä¿è¾“å‡ºåŒ…å«**\"done\"**å­—æ®µæŒ‡ç¤ºç»“æœæ˜¯å¦ä»¤äººæ»¡æ„\n\n\n\n5. **ç¼–è¾‘å­—æ®µèŠ‚ç‚¹è®¾ç½®(æœ€ç»ˆ)**\n- ç¡®ä¿æœ€ç»ˆçš„**\"ç¼–è¾‘å­—æ®µ\"**èŠ‚ç‚¹ä¸åˆå§‹è¾“å…¥ç»“æ„åŒ¹é…\n- è¿™ç¡®ä¿å¾ªç¯èƒ½åœ¨æ¯æ¬¡è¿­ä»£ä¸­æ­£ç¡®å¤„ç†æ•°æ®\n\n\n\n6. **æ¡ä»¶åˆ¤æ–­èŠ‚ç‚¹è®¾ç½®**\n- é…ç½®**\"æ¡ä»¶åˆ¤æ–­\"**èŠ‚ç‚¹æ£€æŸ¥**\"turn\"**æ˜¯å¦è¶…è¿‡é˜ˆå€¼(ä¾‹å¦‚5)æˆ–**\"done\"**æ˜¯å¦ä¸ºçœŸ\n- å¦‚æœä¸ºçœŸï¼Œåˆ™é€€å‡ºå¾ªç¯å¹¶ç»§ç»­å·¥ä½œæµä¸‹ä¸€æ­¥\n\n\n\n7. **å¯é€‰: é¢å¤–AIä»£ç†**\n- åœ¨å¾ªç¯åæ·»åŠ é¢å¤–çš„AIä»£ç†ä»¥è¿›ä¸€æ­¥å¤„ç†æœ€ç»ˆè¾“å‡º\n\n\n---\n\n\n",
        "height": 1160,
        "width": 3920,
        "color": 5
      },
      "id": "fc71442b-56ff-4482-91b2-b2608448a13e",
      "name": "ä¾¿ç­¾",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        0
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=**å¾…æ£€æŸ¥ç»“æœ:** {{ $json.output }}\n\n**å¾ªç¯è½®æ¬¡:** {{ $('ç¼–è¾‘å­—æ®µ').item.json.turn }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "ä½ æ˜¯ä¸€ä¸ªè¯„ä¼°è€…ã€‚å¯¹3ä¸ªæ”¹è¿›åçš„åç§°å’Œæ ‡è¯­è¿›è¡Œæ’åã€‚åˆ¤æ–­è¿™äº›åç§°å’Œæ ‡è¯­æ˜¯å¦è¶³å¤Ÿå‡ºè‰²ï¼Œèƒ½è®©äººæƒ³è¦ä»è¯¥å…¬å¸è´­ä¹°äº§å“ï¼Œæˆ–è€…éœ€è¦è¿›ä¸€æ­¥æ”¹è¿›(æ˜¯/å¦)ã€‚è¾“å‡ºç¬¦åˆä»¥ä¸‹æ ¼å¼çš„JSONï¼š\n{\n\t\"ideas\": [\n      { \"name\": \"ä¼ä¸šæ™ºè„‘\", \"tagline\": \"åˆ©ç”¨AIå°†æ‚¨çš„å•†ä¸šåˆ›æ„è½¬åŒ–ä¸ºç°å®ã€‚\" },\n      { \"name\": \"åˆ›æ–°é€»è¾‘\", \"tagline\": \"é€šè¿‡AIé©±åŠ¨çš„æ—¥å¿—è®°å½•æ•æ‰å’Œå‘å±•æ‚¨çš„åˆ›ä¸šæƒ³æ³•ã€‚\" },\n      { \"name\": \"åˆ›ä¸šè„šæœ¬\", \"tagline\": \"é€šè¿‡æ™ºèƒ½AIæ—¥å¿—è®°å½•åŠ é€Ÿæ‚¨çš„åˆ›ä¸šæ—…ç¨‹ã€‚\" }],\n  \"done\": \"æ˜¯\",\n  \"turn\": 2\n}"
        }
      },
      "id": "71328f01-30a0-42f8-a59c-b500ccb654b8",
      "name": "è¯„ä¼°ä»£ç†",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        3040,
        528
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "model": "qwen2.5:7b",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOllama",
      "typeVersion": 1,
      "position": [
        1216,
        416
      ],
      "id": "6f2cff15-2ae5-4482-a5ef-29987ffb00ee",
      "name": "OllamaèŠå¤©æ¨¡å‹",
      "credentials": {
        "ollamaApi": {
          "id": "CmjvgiZdYI8HpMIu",
          "name": "Ollama account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        736,
        304
      ],
      "id": "273f7514-151d-4f43-832a-7a953cbc0942",
      "name": "å½“æ”¶åˆ°èŠå¤©æ¶ˆæ¯æ—¶",
      "webhookId": "4110e0b5-7f92-4b9b-b89c-3126e8d112ae"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "289341ff-0f9b-4dd7-8e77-756d1a2aaa59",
              "name": "productDescription",
              "value": "={{ $json.chatInput }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        944,
        304
      ],
      "id": "d2cfc9f4-a678-45ca-aab4-0b7d01dde069",
      "name": "ç¼–è¾‘å­—æ®µ2"
    },
    {
      "parameters": {
        "jsCode": "// å¾ªç¯å¤„ç†è¾“å…¥é¡¹å¹¶ä¸ºæ¯ä¸ªJSONæ·»åŠ ä¸€ä¸ªåä¸º'myNewField'çš„æ–°å­—æ®µ\nfor (const item of $input.all()) {\n  item.json.productDescription = \"éšä¾¿æƒ³ç‚¹ä»€ä¹ˆå¥½ç©çš„äº§å“æè¿°\";\n}\n\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        944,
        128
      ],
      "id": "d92ea557-1199-4574-9a82-4dedd8f52eb6",
      "name": "ä»£ç 1"
    }
  ],
  "pinData": {},
  "connections": {
    "æ¡ä»¶åˆ¤æ–­": {
      "main": [
        [],
        [
          {
            "node": "æ‰¹è¯„ä»£ç†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ä»£ç ": {
      "main": [
        [
          {
            "node": "ç¼–è¾‘å­—æ®µ1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AIä»£ç†": {
      "main": [
        [
          {
            "node": "å¾ªç¯å¤„ç†é¡¹",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç¼–è¾‘å­—æ®µ": {
      "main": [
        [
          {
            "node": "æ¡ä»¶åˆ¤æ–­",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ‰¹è¯„ä»£ç†": {
      "main": [
        [
          {
            "node": "ä¼˜åŒ–ä»£ç†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç¼–è¾‘å­—æ®µ1": {
      "main": [
        [
          {
            "node": "å¾ªç¯å¤„ç†é¡¹",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ä¼˜åŒ–ä»£ç†": {
      "main": [
        [
          {
            "node": "è¯„ä¼°ä»£ç†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å¾ªç¯å¤„ç†é¡¹": {
      "main": [
        [],
        [
          {
            "node": "ç¼–è¾‘å­—æ®µ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è¯„ä¼°ä»£ç†": {
      "main": [
        [
          {
            "node": "ä»£ç ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç»“æ„åŒ–è¾“å‡ºè§£æå™¨": {
      "ai_outputParser": [
        [
          {
            "node": "è¯„ä¼°ä»£ç†",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "å½“ç‚¹å‡»'æ‰§è¡Œå·¥ä½œæµ'æ—¶": {
      "main": [
        [
          {
            "node": "ä»£ç 1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OllamaèŠå¤©æ¨¡å‹": {
      "ai_languageModel": [
        [
          {
            "node": "AIä»£ç†",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "æ‰¹è¯„ä»£ç†",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "ä¼˜åŒ–ä»£ç†",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "è¯„ä¼°ä»£ç†",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "å½“æ”¶åˆ°èŠå¤©æ¶ˆæ¯æ—¶": {
      "main": [
        [
          {
            "node": "ç¼–è¾‘å­—æ®µ2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç¼–è¾‘å­—æ®µ2": {
      "main": [
        [
          {
            "node": "AIä»£ç†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ä»£ç 1": {
      "main": [
        [
          {
            "node": "AIä»£ç†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "f0585997-9aef-42d1-b7e0-219af0a0b8df",
  "meta": {
    "instanceId": "1a78272c2439a7675eadcd563b0689769ea02281bea64a701b476f505db425fd"
  },
  "id": "Pj4F52PA4dfneU4Y",
  "tags": []
}